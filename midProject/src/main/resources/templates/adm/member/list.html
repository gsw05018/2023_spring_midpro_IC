<html layout:decorate = "~{adm/common/layout}">

<head>
    <title>회원목록</title>
</head>

<body>

<div class = "flex-1 flex items-center justify-center" layout:fragment = "content">
    <div class = "container w-full px-4">
        <h1 class = "mb-4">
            <i class = "fa-solid fa-users"></i>
            회원목록
        </h1>

        <div class = "flex gap-2 items-center">
            <div>
                <span class = "label-txt">Total</span>
                <span th:text = "${memberPage.totalElements}"></span>
            </div>
            <div class = "flex-grow"></div>
            <button class = "btn btn-primary" onclick = "searchFormModal.showModal()">
                <i class = "fa-solid fa-magnifying-glass"></i>
                검색
                <span th:if = "${UtThy.hasText(param.kw)}" th:text = "|`${param.kw}`|"></span>
            </button>
            <a class = "btn btn-outline" href = "/adm/member/list" th:if = "${UtThy.hasText(param.kw)}">
                <i class = "fa-solid fa-xmark"></i>
                검색조건 지우기
            </a>
        </div>

        <dialog class = "modal" id = "searchFormModal">
            <div class = "modal-box">
                <form method = "dialog">
                    <button class = "btn btn-sm btn-circle btn-ghost absolute right-2 top-2">✕</button>
                </form>

                <form class = "bg-base rounded flex flex-col gap-6" onsubmit = "submitSearchForm(this); return false;">

                    <div class = "form-control">
                        <label class = "label">
                            <span class = "label-text">검색필터</span>
                        </label>

                        <select class = "select select-bordered" name = "kwType" th:value = "${param.kwType}">
                            <option value = "all">전체</option>
                            <option value = "username">아이디</option>
                            <option value = "email">이메일</option>
                            <option value = "nickname">별명</option>
                        </select>
                    </div>

                    <div class = "form-control">
                        <label class = "label">
                            <span class = "label-text">검색어</span>
                        </label>

                        <input class = "input input-bordered ws-full"
                               name = "kw"
                               placeholder = "검색어"
                               th:value = "${param.kw}"
                               type = "text"
                        >
                    </div>

                    <div>
                        <button class = "btn btn-block btn-primary gap-1">
                            <i class = "fa-solid fa-magnifying-glass"></i>
                            <span>검색</span>
                        </button>
                    </div>

                </form>
            </div>

            <form class = "modal-backdrop" method = "dialog">
                <button>close</button>
            </form>
        </dialog>

        <div>

            <ul class = "grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-[20px]">
                <li class = "group" th:each = "member : ${memberPage.content}">
                    <div class = "card bg-base-100 dark:bg-base-200 shadow-xl">
                        <div class = "card-body">

                            <div class = "detail flex flex-col gap-3">
                                <div class = "form-control">
                                    <div class = "flex justify-center">
                                        <img class = "w-40 h-40 rounded-full"
                                             th:src = "${@memberService.getProfileImgUrl(member)}">
                                    </div>
                                </div>

                                <div class = "form-control">
                                    <label class = "label">
                                        <span class = "label-text">회원번호</span>
                                    </label>
                                    <div th:text = "${member.id}"></div>
                                </div>

                                <div class = "form-control">
                                    <label class = "label">
                                        <span class = "label-text">가입일</span>
                                    </label>
                                    <div th:text = "${#temporals.format(member.createDate, 'yy.MM.dd')}"></div>
                                </div>

                                <div class = "form-control">
                                    <label class = "label">
                                        <span class = "label-text">아이디</span>
                                    </label>
                                    <div th:text = "${member.username}"></div>
                                </div>

                                <div class = "form-control">
                                    <label class = "label">
                                        <span class = "label-text">별명</span>
                                    </label>
                                    <div th:text = "${member.nickname}"></div>
                                </div>

                                <div class = "form-control">
                                    <label class = "label">
                                        <span class = "label-text">EMAIL</span>
                                    </label>
                                    <div th:text = "${member.email}"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </li>
            </ul>
        </div>
    </div>
</div>

</body>

</html>